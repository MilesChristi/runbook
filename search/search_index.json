{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p># \ud83e\udded SysAdmin Runbook</p> <p>Bienvenue sur mon runbook (Installations, Exploitation, D\u00e9pannage, Checklists, Incidents, Scripts).</p>"},{"location":"architecture/","title":"Index","text":"<p># Architecture</p>"},{"location":"checklists/","title":"Index","text":"<p># Checklists</p>"},{"location":"depannage/","title":"Index","text":"<p># D\u00e9pannage</p> <p>\u00c0 compl\u00e9ter.</p>"},{"location":"exploitation/","title":"Index","text":"<p># Exploitation</p>"},{"location":"incidents/","title":"Index","text":"<p># Incidents</p>"},{"location":"installations/fog-installation/","title":"Fog installation","text":""},{"location":"installations/fog-installation/#objectif","title":"\ud83c\udfaf Objectif","text":"<p>Installer FOG Project sur un serveur Linux pour le d\u00e9ploiement d\u2019images.</p>"},{"location":"installations/fog-installation/#portee","title":"\ud83d\udce6 Port\u00e9e","text":"<p>Serveur Debian / Ubuntu utilis\u00e9 comme serveur PXE.</p>"},{"location":"installations/fog-installation/#risques","title":"\u26a0\ufe0f Risques","text":"<ul> <li>Mauvaise configuration DHCP</li> <li>Conflit avec serveur DHCP existant</li> </ul>"},{"location":"installations/fog-installation/#prerequis","title":"\u2705 Pr\u00e9requis","text":"<ul> <li>Serveur Debian ou Ubuntu</li> <li>Acc\u00e8s root</li> <li>IP fixe configur\u00e9e <pre><code>sudo nano /etc/netplan/01-netcfg.yaml\n</code></pre></li> <li>Acc\u00e8s Internet</li> </ul>"},{"location":"installations/fog-installation/#procedure","title":"\ud83e\udded Proc\u00e9dure","text":""},{"location":"installations/fog-installation/#1-installation-du-serveur-fog","title":"1. Installation du serveur FOG","text":"<pre><code>sudo apt update &amp;&amp; sudo apt full-upgrade -y\nsudo apt install curl -y\nsudo apt install git -y\n</code></pre> <pre><code>cd fogproject-stable/bin\nsudo ./installfog.sh\n</code></pre> <p>Au lancement de l'installateur FOG, une Fen\u00eatre s'affiche :</p> <p></p> <p>Une fois le processus termin\u00e9, on doit se connecter, \u00e0 l'aide d'un navigateur, \u00e0 l'adresse indiqu\u00e9. Exemple :</p> <p>http://192.168.1.1/fog/management</p> <p>ATTENTION</p> <p>Ne pas faire \"Entr\u00e9e\" tout de suite. Lancer d\u2019abord le navigateur pour initialiser la base de donn\u00e9es.</p>"},{"location":"installations/fog-installation/#2-installation-dnsmasq","title":"2. Installation dnsmasq","text":"<pre><code>sudo apt update &amp;&amp; sudo apt full-upgrade -y\nsudo apt install dnsmasq -y\ndnsmasq --version\n</code></pre>"},{"location":"installations/fog-installation/#3-creer-le-fichier-de-configuration-fog","title":"3. Cr\u00e9er le fichier de configuration FOG","text":"<pre><code>sudo nano /etc/dnsmasq.d/ltsp.conf\n</code></pre> <p>\u26a0\ufe0f Remplace <code>192.168.1.66</code> par l\u2019IP de TON serveur FOG et le dhcp-Range <pre><code># ================================\n# DNSMASQ ProxyDHCP pour FOG\n# Debian 13\n# ================================\n\n# Ne pas faire serveur DNS\nport=0\n\n# Logs DHCP\nlog-dhcp\n\n# Activer ou D\u00e9sactiver TFTP\n#enable-tftp\n#tftp-root=/tftpboot\n\n# Ne pas \u00e9craser options DHCP\ndhcp-no-override\n\n# D\u00e9tection du type de firmware\ndhcp-vendorclass=BIOS,PXEClient:Arch:00000\ndhcp-vendorclass=UEFI32,PXEClient:Arch:00006\ndhcp-vendorclass=UEFI,PXEClient:Arch:00007\ndhcp-vendorclass=UEFI64,PXEClient:Arch:00009\n\n# BIOS Legacy\ndhcp-boot=undionly.kpxe,,192.168.1.66\n\n# UEFI\ndhcp-boot=net:UEFI32,i386-efi/ipxe.efi,,192.168.1.66\ndhcp-boot=net:UEFI,ipxe.efi,,192.168.1.66\ndhcp-boot=net:UEFI64,ipxe.efi,,192.168.1.66\n\n# Menu PXE\npxe-prompt=\"Booting FOG Client\", 1\n\npxe-service=X86PC,\"Boot to FOG\",undionly.kpxe\npxe-service=X86-64_EFI,\"Boot to FOG UEFI\",ipxe.efi\npxe-service=BC_EFI,\"Boot to FOG UEFI PXE-BC\",ipxe.efi\n\n# Mode ProxyDHCP\ndhcp-range=192.168.1.0,proxy\n</code></pre></p>"},{"location":"installations/fog-installation/#4-redemarrer-et-activer-dnsmasq","title":"4. Red\u00e9marrer et Activer dnsmasq","text":"<pre><code>sudo systemctl restart dnsmasq\nsudo systemctl enable dnsmasq\n</code></pre>"},{"location":"installations/fog-installation/#5-verifier-que-le-port-69-tftp-ecoute","title":"5. V\u00e9rifier que le port 69 (TFTP) \u00e9coute","text":"<pre><code>sudo ss -anu | grep :69\n</code></pre> <p>R\u00e9sultat attendu :</p> <pre><code>UNCONN 0 0 0.0.0.0:69\n</code></pre>"},{"location":"installations/fog-installation/#6-verifier-que-fog-fournit-bien-les-fichiers-pxe","title":"6. V\u00e9rifier que FOG fournit bien les fichiers PXE","text":"<pre><code>ls /tftpboot\n</code></pre>"},{"location":"installations/fog-installation/#7-ouvrir-les-ports-pare-feu-si-actif","title":"7. Ouvrir les ports pare-feu (si actif)","text":"<pre><code>sudo apt install ufw -y\nsudo ufw allow 69/udp\nsudo ufw allow 4011/udp\nsudo ufw allow 80\nsudo ufw allow 443\nsudo ufw reload\n</code></pre>"},{"location":"installations/fog-installation/#verifications","title":"\ud83e\uddea V\u00e9rifications","text":"<ol> <li>D\u00e9marre un PC client</li> <li>Boot r\u00e9seau (PXE)</li> <li>Tu dois voir :</li> </ol> <p>Booting FOG Client Menu iPXE FOG</p>"},{"location":"installations/fog-installation/#depannage","title":"\ud83e\uddef D\u00e9pannage","text":""},{"location":"installations/fog-installation/#liens-wiki","title":"\ud83d\udd17 Liens wiki","text":"<ul> <li> <p>Parent : [[Index - Installations]]</p> </li> <li> <p>Li\u00e9s : [[...]]</p> </li> </ul> <p>\ud83c\udf10 Documentation officielle FOG Project : https://docs.fogproject.org/en/latest/</p>"}]}